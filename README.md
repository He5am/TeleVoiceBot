# TeleVoiceBot

یک ربات تلگرام برای مدیریت و ارسال پیام‌های صوتی Asterisk به گروه‌های تلگرام، با قابلیت یافتن شناسه چت و تاپیک.

## قابلیت‌ها
- نظارت بر دایرکتوری‌های پیام صوتی Asterisk
- ارسال پیام‌های صوتی به گروه‌های تلگرام
- پشتیبانی از چندین صندوق پیام صوتی
- پشتیبانی از تاپیک‌های گروه تلگرام
- یافتن شناسه چت و تاپیک با دستور `/start`
- پشتیبانی از چت خصوصی و گروه
- مدیریت خطا و گزارش‌دهی خودکار
- تبدیل زمان UTC به تهران

## نصب

1. کلون کردن مخزن:
```bash
git clone https://github.com/He5am/TeleVoiceBot.git
cd TeleVoiceBot
```

2. نصب وابستگی‌ها:
```bash
pip install -r requirements.txt
```

3. ساخت فایل تنظیمات:
```bash
cp .env.example .env
```

4. ویرایش فایل `.env` و تنظیم مقادیر مورد نیاز:
```ini
# تنظیمات ربات تلگرام
BOT_TOKEN=توکن_ربات_شما
ADMIN_CHAT_ID=شناسه_چت_ادمین

# تنظیمات SSH
SSH_HOST=آدرس_سرور_استریسک
SSH_PORT=22
SSH_USERNAME=نام_کاربری_ssh
SSH_PASSWORD=رمز_عبور_ssh

# مسیرهای پیام صوتی
VOICEMAIL_DIR_1=/path/to/voicemail/1/INBOX
VOICEMAIL_DIR_2=/path/to/voicemail/2/INBOX
# ... و غیره

# تنظیمات چت‌ها
CHAT_1_ID=شناسه_چت_1
THREAD_1=شناسه_تاپیک_1
# ... و غیره
```

## استفاده

### اجرای ربات
برای اجرای ربات:
```bash
python bot.py
```

### یافتن شناسه چت و تاپیک
1. ربات را استارت کنید
2. در چت خصوصی یا گروه دستور `/start` را بزنید
3. ربات شناسه چت و تاپیک را به ادمین ارسال می‌کند

## نکات امنیتی
- هرگز فایل `.env` را در گیت کامیت نکنید
- توکن ربات و اطلاعات SSH را محرمانه نگه دارید
- از رمزهای عبور قوی استفاده کنید
- به جای رمز عبور SSH، استفاده از کلید SSH توصیه می‌شود
- وابستگی‌ها را مرتباً به‌روز کنید
- از فایروال برای محدود کردن دسترسی SSH استفاده کنید

## لاگ‌ها و خطایابی
- لاگ‌ها در فایل `voicemail_bot.log` ذخیره می‌شوند
- خطاها به صورت خودکار به ادمین گزارش می‌شوند
- در صورت قطع شدن اتصال، ربات به صورت خودکار دوباره متصل می‌شود

## لایسنس
MIT License 